{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"E:\\\\novostack\\\\shopify\\\\apps\\\\ns-nextjs-shopify\\\\components\\\\CrawlUrl.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component, createRef } from 'react';\nimport { Layout, Card, Form, FormLayout, TextField, Button, ChoiceList, MediaCard, Banner, DataTable, Checkbox } from '@shopify/polaris';\nimport axios from 'axios';\nimport Cookies from 'js-cookie';\nimport { IoIosInformationCircle } from \"react-icons/io\";\n\nvar CrawlUrl = /*#__PURE__*/function (_Component) {\n  _inherits(CrawlUrl, _Component);\n\n  var _super = _createSuper(CrawlUrl);\n\n  function CrawlUrl(props) {\n    var _this;\n\n    _classCallCheck(this, CrawlUrl);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSearchChange\", function (value) {\n      _this.setState({\n        searchUrl: value\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChangeEcom\", function (value) {\n      _this.setState({\n        selectedEcom: value\n      });\n\n      _this.setState({\n        searchUrl: ''\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleTitleChange\", function (value) {\n      _this.setState({\n        fetchedProduct: _objectSpread(_objectSpread({}, _this.state.fetchedProduct), {}, {\n          title: value\n        })\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleFinalPrice\", function (value) {\n      console.log(value);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleFecthSuggestProductTitle\", /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_event) {\n        var response;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this.setState({\n                  isLoading: true\n                });\n\n                _context.next = 3;\n                return axios({\n                  url: '/api/deepai?',\n                  method: 'GET',\n                  params: {\n                    text: _this.state.fetchedProduct.title\n                  }\n                }).then(function (response) {\n                  console.log(response);\n                });\n\n              case 3:\n                response = _context.sent;\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"handleFecthProductSubmit\", /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_event) {\n        var response;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _this.setState({\n                  isLoading: true\n                });\n\n                _context2.prev = 1;\n                _context2.next = 4;\n                return axios({\n                  url: '/api/scrap-product-detail?',\n                  method: 'GET',\n                  params: {\n                    url: _this.state.searchUrl,\n                    ecom: _this.state.selectedEcom[0],\n                    product_id: 0,\n                    db_entry: 0\n                  }\n                }).then(function (response) {\n                  console.log(response);\n\n                  if (response.data != null) {\n                    _this.setState({\n                      foundProduct: true,\n                      fetchedProduct: response.data.product,\n                      isLoading: false\n                    });\n                  } else {\n                    _this.setState({\n                      foundProduct: false,\n                      isLoading: false,\n                      msg: 'No Product data found on given product page link'\n                    });\n                  }\n\n                  {\n                    console.log(response.data.product);\n                  }\n                  /*\r\n                  if(response.data.productDetail!=null){            \r\n                      if(response.data.productDetail.variants){\r\n                          const items = [];\r\n                          Promise.all(\r\n                              response.data.productDetail.variants.map((variant,index) => {\r\n                                  if(variant.price==null){\r\n                                      variant.price = 0\r\n                                  }else{\r\n                                  variant.price = variant.price.toString().replace('$','')\r\n                                  }\r\n                                  variant.finalPrice = (Number( this.state.priceRules.productPriceHike ) * parseFloat( variant.price))\r\n                                  if(!variant.qty){variant.qty=0}\r\n                                  items.push(variant)\r\n                              })\r\n                          );                    \r\n                          response.data.productDetail.variants = items\r\n                          console.log(response.data.productDetail)\r\n                          this.setState({\r\n                              foundProduct:true,\r\n                              fetchedProduct : response.data.productDetail,\r\n                              isLoading:false,\r\n                          })\r\n                      }\r\n                  }else{\r\n                      this.setState({\r\n                          foundProduct:false,\r\n                          isLoading:false,\r\n                          msg:'No Product data found on given product page link',\r\n                      })\r\n                  }\r\n                  */\n                });\n\n              case 4:\n                response = _context2.sent;\n                _context2.next = 11;\n                break;\n\n              case 7:\n                _context2.prev = 7;\n                _context2.t0 = _context2[\"catch\"](1);\n                console.log(_context2.t0);\n\n                _this.setState({\n                  isLoading: false\n                });\n\n              case 11:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[1, 7]]);\n      }));\n\n      return function (_x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"handleAddProduct\", /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(_event) {\n        var response;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                //console.log(this.state.fetchedProduct)\n                _this.setState({\n                  isLoading: true\n                });\n\n                _context3.prev = 1;\n                _context3.next = 4;\n                return axios({\n                  headers: {\n                    'shopname': Cookies.get('shopOrigin')\n                  },\n                  url: '/api/products',\n                  method: 'post',\n                  data: _this.state.fetchedProduct\n                }).then(function (response) {\n                  console.log(response);\n\n                  _this.setState({\n                    isLoading: false\n                  });\n                });\n\n              case 4:\n                response = _context3.sent;\n                _context3.next = 10;\n                break;\n\n              case 7:\n                _context3.prev = 7;\n                _context3.t0 = _context3[\"catch\"](1);\n                console.log(_context3.t0);\n\n              case 10:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[1, 7]]);\n      }));\n\n      return function (_x3) {\n        return _ref3.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"handleEditProduct\", /*#__PURE__*/function () {\n      var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(_event) {\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                console.log('popup');\n\n              case 1:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }));\n\n      return function (_x4) {\n        return _ref4.apply(this, arguments);\n      };\n    }());\n\n    _this.state = {\n      searchUrl: '',\n      selectedEcom: ['Ebay'],\n      fetchedProduct: null,\n      foundProduct: false,\n      isLoading: false,\n      msg: 'Please copy past product page into url field and press extract button',\n      priceRules: {\n        pricehikeconditional: '*',\n        productPriceHike: '2'\n      },\n      finalPrice: 0,\n      productTitle: ''\n    };\n    return _this;\n  }\n\n  _createClass(CrawlUrl, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      try {\n        var response = axios({\n          headers: {\n            'shopname': Cookies.get('shopOrigin')\n          },\n          url: '/api/settings',\n          method: 'GET'\n        }).then(function (response) {\n          response.data.settings ? _this2.setState({\n            priceRules: response.data.settings.priceRules\n          }) : _this2.setState({\n            priceRules: {\n              pricehikeconditional: '*',\n              productPriceHike: '2'\n            }\n          });\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return /*#__PURE__*/_jsxDEV(Form, {\n        name: \"product-fetch-form\",\n        onSubmit: this.handleFecthProductSubmit,\n        method: \"post\",\n        children: /*#__PURE__*/_jsxDEV(FormLayout, {\n          children: [/*#__PURE__*/_jsxDEV(Layout.AnnotatedSection, {\n            title: \"Extract Product\",\n            description: \"With the help of scrap url you can get product from here to your shop\",\n            children: /*#__PURE__*/_jsxDEV(Card, {\n              sectioned: true,\n              children: [/*#__PURE__*/_jsxDEV(ChoiceList, {\n                choices: [{\n                  label: 'Ebay',\n                  value: 'Ebay'\n                }, {\n                  label: 'Sams Club',\n                  value: 'SamsClub'\n                }, {\n                  label: 'Boscovs',\n                  value: 'Boscovs'\n                }, {\n                  label: 'Home Depot',\n                  value: 'HomeDepot'\n                }, {\n                  label: 'Bed Bath',\n                  value: 'BedBathandBeyond'\n                }, {\n                  label: 'WalMart',\n                  value: 'Walmart'\n                }, {\n                  label: 'CostCo',\n                  value: 'CostCo'\n                }],\n                name: \"ecom\",\n                selected: this.state.selectedEcom,\n                onChange: this.handleChangeEcom\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 204,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(TextField, {\n                label: \"Paste URL Here\",\n                name: \"searchUrl\",\n                type: \"text\",\n                value: this.state.searchUrl,\n                onChange: this.handleSearchChange,\n                connectedRight: /*#__PURE__*/_jsxDEV(Button, {\n                  loading: this.state.isLoading ? true : false,\n                  primary: true,\n                  name: \"fetchproduct\",\n                  submit: \"true\",\n                  children: \"Extract\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 225,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 218,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 21\n          }, this), this.state.foundProduct ? /*#__PURE__*/_jsxDEV(Layout, {\n            sectioned: true,\n            children: /*#__PURE__*/_jsxDEV(Layout.Section, {\n              children: /*#__PURE__*/_jsxDEV(Card, {\n                sectioned: true,\n                children: [/*#__PURE__*/_jsxDEV(TextField, {\n                  name: \"title\",\n                  label: \"Product Title\",\n                  value: this.state.fetchedProduct.title,\n                  onChange: this.handleTitleChange,\n                  connectedRight: /*#__PURE__*/_jsxDEV(Button, {\n                    loading: this.state.isLoading ? true : false,\n                    primary: true,\n                    name: \"getsuggestproducttitle\",\n                    onClick: this.handleFecthSuggestProductTitle,\n                    children: \"Suggest\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 239,\n                    columnNumber: 38\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 237,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"suggest-product-title\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    \"class\": \"auto-complete-box\",\n                    children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                        children: \"Product title 1\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 252,\n                        columnNumber: 45\n                      }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                        children: \"Product title 2\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 253,\n                        columnNumber: 45\n                      }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                        children: \"Product title 3\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 254,\n                        columnNumber: 45\n                      }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                        children: \"Product title 4\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 255,\n                        columnNumber: 45\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 251,\n                      columnNumber: 41\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 250,\n                    columnNumber: 37\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 249,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(Layout, {\n                  children: [/*#__PURE__*/_jsxDEV(Layout.Section, {\n                    secondary: true,\n                    children: this.state.fetchedProduct.items ? /*#__PURE__*/_jsxDEV(\"img\", {\n                      alt: \"\",\n                      width: \"100%\",\n                      height: \"100%\",\n                      style: {\n                        objectFit: 'cover',\n                        objectPosition: 'center'\n                      },\n                      src: this.state.fetchedProduct.images[0]\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 263,\n                      columnNumber: 45\n                    }, this) : ''\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 260,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(Layout.Section, {\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"variant-table\",\n                      children: /*#__PURE__*/_jsxDEV(\"table\", {\n                        width: \"100%\",\n                        children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n                          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                            children: \"SKU\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 281,\n                            columnNumber: 53\n                          }, this), this.state.fetchedProduct.options ? this.state.fetchedProduct.options.map(function (option, index) {\n                            return /*#__PURE__*/_jsxDEV(\"th\", {\n                              align: \"left\",\n                              children: option.name\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 286,\n                              columnNumber: 65\n                            }, _this3);\n                          }) : '', /*#__PURE__*/_jsxDEV(\"th\", {\n                            children: \"Price\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 292,\n                            columnNumber: 53\n                          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                            children: \"Margin\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 293,\n                            columnNumber: 53\n                          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                            children: \"Final Price\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 294,\n                            columnNumber: 53\n                          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                            children: \"Unites\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 295,\n                            columnNumber: 53\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 280,\n                          columnNumber: 49\n                        }, this), this.state.fetchedProduct.items ? this.state.fetchedProduct.items.map(function (item, index) {\n                          if (_this3.state.priceRules.pricehikeconditional == '*') {\n                            item.finalPrice = Number(_this3.state.priceRules.productPriceHike) * parseFloat(item.price);\n                          } else if (_this3.state.priceRules.pricehikeconditional == '+') {\n                            item.finalPrice = Number(_this3.state.priceRules.productPriceHike) + parseFloat(item.price);\n                          }\n\n                          return /*#__PURE__*/_jsxDEV(\"tr\", {\n                            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                              children: item.sku\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 309,\n                              columnNumber: 65\n                            }, _this3), item.options ? item.options.map(function (option, i) {\n                              return /*#__PURE__*/_jsxDEV(\"td\", {\n                                children: option\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 314,\n                                columnNumber: 77\n                              }, _this3);\n                            }) : '', /*#__PURE__*/_jsxDEV(\"td\", {\n                              children: [\"$ \", item.price]\n                            }, void 0, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 320,\n                              columnNumber: 65\n                            }, _this3), /*#__PURE__*/_jsxDEV(\"td\", {\n                              children: [_this3.state.priceRules.pricehikeconditional, \" \", _this3.state.priceRules.productPriceHike]\n                            }, void 0, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 321,\n                              columnNumber: 65\n                            }, _this3), /*#__PURE__*/_jsxDEV(\"td\", {\n                              children: /*#__PURE__*/_jsxDEV(TextField, {\n                                name: \"finalPrice\",\n                                type: \"text\",\n                                value: item.finalPrice,\n                                onChange: _this3.handleFinalPrice\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 324,\n                                columnNumber: 69\n                              }, _this3)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 323,\n                              columnNumber: 65\n                            }, _this3), /*#__PURE__*/_jsxDEV(\"td\", {\n                              children: [\" \", item.max_quantity, \" \"]\n                            }, void 0, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 331,\n                              columnNumber: 65\n                            }, _this3)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 308,\n                            columnNumber: 61\n                          }, _this3);\n                        }) : 'No Variant available']\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 279,\n                        columnNumber: 45\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 278,\n                      columnNumber: 41\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 277,\n                    columnNumber: 37\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 259,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 236,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 21\n          }, this) : /*#__PURE__*/_jsxDEV(Layout, {\n            children: /*#__PURE__*/_jsxDEV(Layout.Section, {\n              children: /*#__PURE__*/_jsxDEV(Banner, {\n                icon: IoIosInformationCircle,\n                title: \"Product fetch\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: this.state.msg\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 351,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 350,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 349,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 348,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 17\n      }, this);\n    }\n  }]);\n\n  return CrawlUrl;\n}(Component);\n\nexport { CrawlUrl as default };","map":{"version":3,"sources":["E:/novostack/shopify/apps/ns-nextjs-shopify/components/CrawlUrl.js"],"names":["React","Component","createRef","Layout","Card","Form","FormLayout","TextField","Button","ChoiceList","MediaCard","Banner","DataTable","Checkbox","axios","Cookies","IoIosInformationCircle","CrawlUrl","props","value","setState","searchUrl","selectedEcom","fetchedProduct","state","title","console","log","_event","isLoading","url","method","params","text","then","response","ecom","product_id","db_entry","data","foundProduct","product","msg","headers","get","priceRules","pricehikeconditional","productPriceHike","finalPrice","productTitle","settings","error","handleFecthProductSubmit","label","handleChangeEcom","handleSearchChange","handleTitleChange","handleFecthSuggestProductTitle","items","objectFit","objectPosition","images","options","map","option","index","name","item","Number","parseFloat","price","sku","i","handleFinalPrice","max_quantity"],"mappings":"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","sourcesContent":["import React,{ Component, createRef } from 'react';\r\nimport { \r\n    Layout,\r\n    Card,\r\n    Form,\r\n    FormLayout,\r\n    TextField,\r\n    Button,\r\n    ChoiceList,\r\n    MediaCard,\r\n    Banner,\r\n    DataTable,\r\n    Checkbox,\r\n} from '@shopify/polaris';\r\nimport axios from 'axios';\r\nimport Cookies from 'js-cookie';\r\nimport {IoIosInformationCircle} from \"react-icons/io\";\r\n\r\nexport default class CrawlUrl extends Component{\r\n    constructor(props) {\r\n        super(props)  \r\n        this.state = {\r\n            searchUrl:'',\r\n            selectedEcom:['Ebay'],\r\n            fetchedProduct:null,\r\n            foundProduct:false,\r\n            isLoading:false,     \r\n            msg:'Please copy past product page into url field and press extract button',\r\n            priceRules : {\r\n                pricehikeconditional:'*',\r\n                productPriceHike:'2',\r\n            },\r\n            finalPrice:0,\r\n            productTitle:'',\r\n        }\r\n    }\r\n\r\n\r\n    componentDidMount(){\r\n        try{\r\n            const response = axios({\r\n                 headers:{\r\n                    'shopname':Cookies.get('shopOrigin')\r\n                },\r\n                url:'/api/settings',\r\n                method:'GET',         \r\n\r\n            }).then((response) =>{\r\n                response.data.settings\r\n                ? \r\n                    this.setState({\r\n                        priceRules:response.data.settings.priceRules\r\n                    })\r\n                :\r\n                    this.setState({\r\n                        priceRules : {\r\n                            pricehikeconditional:'*',\r\n                            productPriceHike:'2',\r\n                        }\r\n                    })\r\n            })\r\n        }catch(error){\r\n            console.log(error)\r\n        }\r\n    }\r\n\r\n    handleSearchChange = (value) =>{this.setState({searchUrl:value})}\r\n    handleChangeEcom = (value) => {\r\n        this.setState({selectedEcom:value})\r\n        this.setState({searchUrl:''})\r\n    }\r\n    handleTitleChange = (value) => {\r\n        this.setState({\r\n            fetchedProduct:{\r\n                ...this.state.fetchedProduct,\r\n                title:value,\r\n            }\r\n        })\r\n    }\r\n    handleFinalPrice = (value) => {\r\n        console.log(value)\r\n    }\r\n    handleFecthSuggestProductTitle = async (_event) => {\r\n        this.setState({\r\n            isLoading:true,\r\n        })\r\n        const response = await axios({\r\n            url : '/api/deepai?',\r\n            method:'GET',\r\n            params:{\r\n                text:this.state.fetchedProduct.title,\r\n            }\r\n        }).then((response) =>{\r\n            console.log(response)\r\n        })\r\n    }\r\n    handleFecthProductSubmit = async (_event) => {\r\n        this.setState({\r\n            isLoading:true,\r\n        })\r\n        try{\r\n            const response = await axios({\r\n                url : '/api/scrap-product-detail?',\r\n                method:'GET',\r\n                params:{\r\n                    url:this.state.searchUrl,\r\n                    ecom:this.state.selectedEcom[0],\r\n                    product_id:0,\r\n                    db_entry:0,\r\n                }\r\n            }).then((response) =>{\r\n                console.log(response)\r\n                if(response.data!=null){            \r\n                    this.setState({\r\n                        foundProduct:true,\r\n                        fetchedProduct : response.data.product,\r\n                        isLoading:false,\r\n                    })\r\n                }else{\r\n                    this.setState({\r\n                        foundProduct:false,\r\n                        isLoading:false,\r\n                        msg:'No Product data found on given product page link',\r\n                    })\r\n                }\r\n                {console.log(response.data.product)}\r\n                /*\r\n                if(response.data.productDetail!=null){            \r\n                    if(response.data.productDetail.variants){\r\n                        const items = [];\r\n                        Promise.all(\r\n                            response.data.productDetail.variants.map((variant,index) => {\r\n                                if(variant.price==null){\r\n                                    variant.price = 0\r\n                                }else{\r\n                                variant.price = variant.price.toString().replace('$','')\r\n                                }\r\n                                variant.finalPrice = (Number( this.state.priceRules.productPriceHike ) * parseFloat( variant.price))\r\n                                if(!variant.qty){variant.qty=0}\r\n                                items.push(variant)\r\n                            })\r\n                        );                    \r\n                        response.data.productDetail.variants = items\r\n                        console.log(response.data.productDetail)\r\n                        this.setState({\r\n                            foundProduct:true,\r\n                            fetchedProduct : response.data.productDetail,\r\n                            isLoading:false,\r\n                        })\r\n                    }\r\n                }else{\r\n                    this.setState({\r\n                        foundProduct:false,\r\n                        isLoading:false,\r\n                        msg:'No Product data found on given product page link',\r\n                    })\r\n                }\r\n                */\r\n            })\r\n        }catch(error){\r\n            console.log(error)\r\n            this.setState({\r\n                isLoading:false,\r\n            })\r\n        }\r\n    }\r\n    handleAddProduct = async (_event) =>{\r\n        //console.log(this.state.fetchedProduct)\r\n        this.setState({\r\n            isLoading:true,\r\n        })\r\n        try{\r\n            const response = await axios({\r\n                headers:{\r\n                    'shopname':Cookies.get('shopOrigin')\r\n                },\r\n                url:'/api/products',\r\n                method:'post',\r\n                data:this.state.fetchedProduct\r\n            }).then((response) =>{\r\n                console.log(response)\r\n                this.setState({\r\n                    isLoading:false,\r\n                })\r\n            })\r\n            //console.log(response)\r\n        }catch(error){\r\n            console.log(error)\r\n        }\r\n    }\r\n    handleEditProduct = async (_event) => {\r\n        console.log('popup')\r\n    }\r\n\r\n    render(){\r\n        return(            \r\n                <Form name=\"product-fetch-form\" onSubmit={this.handleFecthProductSubmit} method=\"post\">\r\n                    <FormLayout>\r\n                    <Layout.AnnotatedSection\r\n                        title=\"Extract Product\"\r\n                        description=\"With the help of scrap url you can get product from here to your shop\"\r\n                    >\r\n                        <Card sectioned>                            \r\n                            <ChoiceList\r\n                            choices={[\r\n                                {label: 'Ebay', value: 'Ebay'},\r\n                                {label: 'Sams Club', value: 'SamsClub'},\r\n                                {label: 'Boscovs', value: 'Boscovs'},\r\n                                {label: 'Home Depot', value: 'HomeDepot'},\r\n                                {label: 'Bed Bath', value: 'BedBathandBeyond'},\r\n                                {label: 'WalMart', value: 'Walmart'},\r\n                                {label: 'CostCo', value: 'CostCo'}\r\n                            ]}\r\n                            name=\"ecom\"                            \r\n                            selected={this.state.selectedEcom}\r\n                            onChange={this.handleChangeEcom}\r\n                            />\r\n                            <TextField\r\n                                label=\"Paste URL Here\"\r\n                                name=\"searchUrl\"\r\n                                type=\"text\"\r\n                                value={this.state.searchUrl}\r\n                                onChange={this.handleSearchChange}\r\n                                connectedRight={\r\n                                    <Button loading={this.state.isLoading ? true : false } primary={true} name=\"fetchproduct\" submit=\"true\">\r\n                                        Extract\r\n                                    </Button>\r\n                                }\r\n                            />                            \r\n                        </Card>\r\n                    </Layout.AnnotatedSection>\r\n                    {this.state.foundProduct\r\n                    ?                    \r\n                    <Layout sectioned={true}>                        \r\n                        <Layout.Section>\r\n                            <Card sectioned>\r\n                                <TextField name=\"title\" label=\"Product Title\" value={this.state.fetchedProduct.title} onChange={this.handleTitleChange}\r\n                                 connectedRight={\r\n                                     <Button \r\n                                        loading={this.state.isLoading ? true : false } \r\n                                        primary={true} \r\n                                        name=\"getsuggestproducttitle\"\r\n                                        onClick={this.handleFecthSuggestProductTitle}\r\n                                     >\r\n                                         Suggest\r\n                                     </Button>\r\n                                 }\r\n                                />\r\n                                <div className=\"suggest-product-title\">\r\n                                    <div class=\"auto-complete-box\">\r\n                                        <ul>\r\n                                            <li>Product title 1</li>\r\n                                            <li>Product title 2</li>\r\n                                            <li>Product title 3</li>\r\n                                            <li>Product title 4</li>\r\n                                        </ul>\r\n                                    </div>\r\n                                </div>\r\n                                <Layout>\r\n                                    <Layout.Section secondary>\r\n                                        {this.state.fetchedProduct.items\r\n                                        ?\r\n                                            <img\r\n                                            alt=\"\"\r\n                                            width=\"100%\"\r\n                                            height=\"100%\"\r\n                                            style={{\r\n                                            objectFit: 'cover',\r\n                                            objectPosition: 'center',\r\n                                            }}\r\n                                            src={this.state.fetchedProduct.images[0]}\r\n                                            />\r\n                                        :\r\n                                            ''\r\n                                        }\r\n                                    </Layout.Section>\r\n                                    <Layout.Section>\r\n                                        <div className='variant-table'>\r\n                                            <table width=\"100%\">\r\n                                                <tr>\r\n                                                    <th>SKU</th>                                                    \r\n                                                    {this.state.fetchedProduct.options\r\n                                                    ?                                                    \r\n                                                        this.state.fetchedProduct.options.map((option,index) => {\r\n                                                            return(\r\n                                                                <th align=\"left\">{option.name}</th>\r\n                                                            )                                                                    \r\n                                                        })\r\n                                                    :\r\n                                                        ''\r\n                                                    }\r\n                                                    <th>Price</th>\r\n                                                    <th>Margin</th>\r\n                                                    <th>Final Price</th>\r\n                                                    <td>Unites</td>                                                \r\n                                                </tr>\r\n                                                \r\n                                                {this.state.fetchedProduct.items\r\n                                                ?                                                    \r\n                                                    this.state.fetchedProduct.items.map((item,index) => {\r\n                                                        \r\n                                                        if(this.state.priceRules.pricehikeconditional=='*'){\r\n                                                            item.finalPrice = (Number( this.state.priceRules.productPriceHike ) * parseFloat( item.price))\r\n                                                        }else if(this.state.priceRules.pricehikeconditional=='+'){\r\n                                                            item.finalPrice = (Number( this.state.priceRules.productPriceHike ) + parseFloat( item.price))\r\n                                                        }                                \r\n                                                        return(\r\n                                                            <tr>\r\n                                                                <td>{item.sku}</td>\r\n                                                                {item.options\r\n                                                                ?\r\n                                                                    item.options.map((option,i) => {\r\n                                                                        return(\r\n                                                                            <td>{option}</td>\r\n                                                                        )                                                                   \r\n                                                                    })\r\n                                                                :\r\n                                                                    ''\r\n                                                                }\r\n                                                                <td>$ {item.price}</td>\r\n                                                                <td>{this.state.priceRules.pricehikeconditional} {this.state.priceRules.productPriceHike}</td>\r\n                                                                \r\n                                                                <td>\r\n                                                                    <TextField\r\n                                                                        name=\"finalPrice\"\r\n                                                                        type=\"text\"\r\n                                                                        value={item.finalPrice}\r\n                                                                        onChange={this.handleFinalPrice}\r\n                                                                    />\r\n                                                                </td>\r\n                                                                <td> {item.max_quantity} </td>\r\n                                                            </tr>                                                            \r\n                                                        )\r\n                                                    })                                                    \r\n                                                :\r\n                                                    'No Variant available'\r\n                                                }\r\n                                                \r\n                                            </table>\r\n                                        </div>                  \r\n                                    </Layout.Section>\r\n                                </Layout>\r\n                            </Card>                        \r\n                        </Layout.Section>\r\n                    </Layout>\r\n                    \r\n                    : \r\n                        <Layout>\r\n                            <Layout.Section>\r\n                                <Banner icon={IoIosInformationCircle} title=\"Product fetch\">\r\n                                    <p>{this.state.msg}</p>\r\n                                </Banner>\r\n                            </Layout.Section>\r\n                        </Layout> \r\n                    }\r\n                    \r\n                    </FormLayout>              \r\n                </Form>\r\n        );\r\n    }\r\n     \r\n    \r\n}"]},"metadata":{},"sourceType":"module"}