{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"E:\\\\novostack\\\\shopify\\\\apps\\\\ns-nextjs-shopify\\\\components\\\\CrawlUrl.js\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport { Layout, Card, Form, FormLayout, TextField, Button, ChoiceList, MediaCard, TextContainer, TextStyle } from '@shopify/polaris';\nimport axios from 'axios';\nimport Cookies from 'js-cookie';\nexport default class CrawlUrl extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"handleSearchChange\", value => {\n      this.setState({\n        searchUrl: value\n      });\n    });\n\n    _defineProperty(this, \"handleChangeEcom\", value => {\n      this.setState({\n        selectedEcom: value\n      });\n      this.setState({\n        searchUrl: ''\n      });\n    });\n\n    _defineProperty(this, \"handleFecthProductSubmit\", async _event => {\n      this.setState({\n        isLoading: true\n      });\n      const response = await axios({\n        url: '/api/scrap-product-detail?',\n        method: 'GET',\n        params: {\n          url: this.state.searchUrl,\n          ecom: this.state.selectedEcom[0],\n          product_id: 0,\n          db_entry: 0\n        }\n      }).then(response => {\n        this.setState({\n          foundProduct: true,\n          fetchedProduct: response.data.productDetail,\n          isLoading: false\n        });\n      });\n    });\n\n    _defineProperty(this, \"handleAddProduct\", async _event => {\n      //console.log(this.state.fetchedProduct)\n      this.setState({\n        isLoading: true\n      });\n\n      try {\n        const response = await axios({\n          headers: {\n            'shopname': Cookies.get('shopOrigin')\n          },\n          url: '/api/products',\n          method: 'post',\n          data: fetchedProduct\n        }).then(response => {\n          console.log(response);\n          this.setState({\n            isLoading: false\n          });\n        }); //console.log(response)\n      } catch (error) {\n        console.log(error);\n      }\n    });\n\n    _defineProperty(this, \"handleEditProduct\", async _event => {\n      console.log('popup');\n    });\n\n    this.state = {\n      searchUrl: '',\n      selectedEcom: ['Ebay'],\n      fetchedProduct: null,\n      foundProduct: false,\n      isLoading: false\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(Form, {\n      name: \"product-fetch-form\",\n      onSubmit: this.handleFecthProductSubmit,\n      method: \"post\",\n      children: /*#__PURE__*/_jsxDEV(FormLayout, {\n        children: [/*#__PURE__*/_jsxDEV(Layout.AnnotatedSection, {\n          title: \"Extract Product\",\n          description: \"With the help of scrap url you can get product from here to your shop\",\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            sectioned: true,\n            children: [/*#__PURE__*/_jsxDEV(ChoiceList, {\n              title: \"ECOM\",\n              choices: [{\n                label: 'Ebay',\n                value: 'Ebay'\n              }, {\n                label: 'Sams Club',\n                value: 'SamsClub'\n              }, {\n                label: 'Boscovs',\n                value: 'Boscovs'\n              }, {\n                label: 'Home Depot',\n                value: 'HomeDepot'\n              }, {\n                label: 'Bed Bath',\n                value: 'BedBathandBeyond'\n              }, {\n                label: 'WalMart',\n                value: 'Walmart'\n              }, {\n                label: 'CostCo',\n                value: 'CostCo'\n              }],\n              name: \"ecom\",\n              selected: this.state.selectedEcom,\n              onChange: this.handleChangeEcom\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(TextField, {\n              label: \"Paste URL Here\",\n              name: \"searchUrl\",\n              type: \"text\",\n              value: this.state.searchUrl,\n              onChange: this.handleSearchChange,\n              connectedRight: /*#__PURE__*/_jsxDEV(Button, {\n                loading: this.state.isLoading ? true : false,\n                primary: true,\n                name: \"fetchproduct\",\n                submit: \"true\",\n                children: \"Extract\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 115,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 21\n        }, this), this.state.foundProduct ? /*#__PURE__*/_jsxDEV(Layout, {\n          sectioned: true,\n          children: /*#__PURE__*/_jsxDEV(Layout.Section, {\n            children: /*#__PURE__*/_jsxDEV(MediaCard, {\n              title: this.state.fetchedProduct.title,\n              primaryAction: {\n                content: 'Add To List',\n                onAction: () => {\n                  this.handleAddProduct();\n                },\n                loading: this.state.isLoading ? true : false,\n                primary: true\n              },\n              secondaryAction: {\n                content: 'Edit Before [Add To List]',\n                onAction: () => {\n                  this.handleEditProduct();\n                },\n                loading: this.state.isLoading ? true : false\n              },\n              description: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"variations\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"variation-list\",\n                  children: this.state.fetchedProduct.variants ? this.state.fetchedProduct.variants.map((variant, index) => {\n                    return /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"v-item\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"image-holder\",\n                        children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                          viewBox: \"0 0 20 20\",\n                          children: /*#__PURE__*/_jsxDEV(\"path\", {\n                            d: \"M2.5 1A1.5 1.5 0 0 0 1 2.5v15A1.5 1.5 0 0 0 2.5 19h15a1.5 1.5 0 0 0 1.5-1.5v-15A1.5 1.5 0 0 0 17.5 1h-15zm5 3.5c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zM16.499 17H3.497c-.41 0-.64-.46-.4-.79l3.553-4.051c.19-.21.52-.21.72-.01L9 14l3.06-4.781a.5.5 0 0 1 .84.02l4.039 7.011c.18.34-.06.75-.44.75z\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 150,\n                            columnNumber: 65\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 149,\n                          columnNumber: 61\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 148,\n                        columnNumber: 57\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"variation-props\",\n                        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                          children: /*#__PURE__*/_jsxDEV(\"span\", {\n                            children: variant.name\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 154,\n                            columnNumber: 64\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 154,\n                          columnNumber: 61\n                        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                          children: /*#__PURE__*/_jsxDEV(\"span\", {\n                            children: variant.price\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 155,\n                            columnNumber: 64\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 155,\n                          columnNumber: 61\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 153,\n                        columnNumber: 57\n                      }, this)]\n                    }, index, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 147,\n                      columnNumber: 53\n                    }, this);\n                  }) : 'No variation'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 142,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 37\n              }, this),\n              size: \"small\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"image-holder\",\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  alt: \"\",\n                  width: \"100%\",\n                  height: \"100%\",\n                  style: {\n                    objectFit: 'cover',\n                    objectPosition: 'center'\n                  },\n                  src: this.state.fetchedProduct.images[0]\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 170,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"product-price\",\n                  children: [\"Price : \", this.state.fetchedProduct.price]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 180,\n                  columnNumber: 29\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 169,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 21\n        }, this) : '']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 17\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["E:/novostack/shopify/apps/ns-nextjs-shopify/components/CrawlUrl.js"],"names":["React","Component","Layout","Card","Form","FormLayout","TextField","Button","ChoiceList","MediaCard","TextContainer","TextStyle","axios","Cookies","CrawlUrl","constructor","props","value","setState","searchUrl","selectedEcom","_event","isLoading","response","url","method","params","state","ecom","product_id","db_entry","then","foundProduct","fetchedProduct","data","productDetail","headers","get","console","log","error","render","handleFecthProductSubmit","label","handleChangeEcom","handleSearchChange","title","content","onAction","handleAddProduct","loading","primary","handleEditProduct","variants","map","variant","index","name","price","objectFit","objectPosition","images"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAAgC,OAAhC;AACA,SACIC,MADJ,EAEIC,IAFJ,EAGIC,IAHJ,EAIIC,UAJJ,EAKIC,SALJ,EAMIC,MANJ,EAOIC,UAPJ,EAQIC,SARJ,EASIC,aATJ,EAUIC,SAVJ,QAWO,kBAXP;AAYA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,WAApB;AAEA,eAAe,MAAMC,QAAN,SAAuBb,SAAvB,CAAgC;AAC3Cc,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,gDAWGC,KAAD,IAAU;AAAC,WAAKC,QAAL,CAAc;AAACC,QAAAA,SAAS,EAACF;AAAX,OAAd;AAAiC,KAX9C;;AAAA,8CAYCA,KAAD,IAAW;AAC1B,WAAKC,QAAL,CAAc;AAACE,QAAAA,YAAY,EAACH;AAAd,OAAd;AACA,WAAKC,QAAL,CAAc;AAACC,QAAAA,SAAS,EAAC;AAAX,OAAd;AACH,KAfkB;;AAAA,sDAgBQ,MAAOE,MAAP,IAAkB;AACzC,WAAKH,QAAL,CAAc;AACVI,QAAAA,SAAS,EAAC;AADA,OAAd;AAGA,YAAMC,QAAQ,GAAG,MAAMX,KAAK,CAAC;AACzBY,QAAAA,GAAG,EAAG,4BADmB;AAEzBC,QAAAA,MAAM,EAAC,KAFkB;AAGzBC,QAAAA,MAAM,EAAC;AACHF,UAAAA,GAAG,EAAC,KAAKG,KAAL,CAAWR,SADZ;AAEHS,UAAAA,IAAI,EAAC,KAAKD,KAAL,CAAWP,YAAX,CAAwB,CAAxB,CAFF;AAGHS,UAAAA,UAAU,EAAC,CAHR;AAIHC,UAAAA,QAAQ,EAAC;AAJN;AAHkB,OAAD,CAAL,CASpBC,IAToB,CASdR,QAAD,IAAa;AACjB,aAAKL,QAAL,CAAc;AACVc,UAAAA,YAAY,EAAC,IADH;AAEVC,UAAAA,cAAc,EAAGV,QAAQ,CAACW,IAAT,CAAcC,aAFrB;AAGVb,UAAAA,SAAS,EAAC;AAHA,SAAd;AAKH,OAfsB,CAAvB;AAgBH,KApCkB;;AAAA,8CAqCA,MAAOD,MAAP,IAAiB;AAChC;AACA,WAAKH,QAAL,CAAc;AACVI,QAAAA,SAAS,EAAC;AADA,OAAd;;AAGA,UAAG;AACC,cAAMC,QAAQ,GAAG,MAAMX,KAAK,CAAC;AACzBwB,UAAAA,OAAO,EAAC;AACJ,wBAAWvB,OAAO,CAACwB,GAAR,CAAY,YAAZ;AADP,WADiB;AAIzBb,UAAAA,GAAG,EAAC,eAJqB;AAKzBC,UAAAA,MAAM,EAAC,MALkB;AAMzBS,UAAAA,IAAI,EAACD;AANoB,SAAD,CAAL,CAOpBF,IAPoB,CAOdR,QAAD,IAAa;AACjBe,UAAAA,OAAO,CAACC,GAAR,CAAYhB,QAAZ;AACA,eAAKL,QAAL,CAAc;AACVI,YAAAA,SAAS,EAAC;AADA,WAAd;AAGH,SAZsB,CAAvB,CADD,CAcC;AACH,OAfD,CAeC,OAAMkB,KAAN,EAAY;AACTF,QAAAA,OAAO,CAACC,GAAR,CAAYC,KAAZ;AACH;AACJ,KA5DkB;;AAAA,+CA6DC,MAAOnB,MAAP,IAAkB;AAClCiB,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACH,KA/DkB;;AAEf,SAAKZ,KAAL,GAAa;AACTR,MAAAA,SAAS,EAAC,EADD;AAETC,MAAAA,YAAY,EAAC,CAAC,MAAD,CAFJ;AAGTa,MAAAA,cAAc,EAAC,IAHN;AAITD,MAAAA,YAAY,EAAC,KAJJ;AAKTV,MAAAA,SAAS,EAAC;AALD,KAAb;AAOH;;AAwDDmB,EAAAA,MAAM,GAAE;AACJ,wBACQ,QAAC,IAAD;AAAM,MAAA,IAAI,EAAC,oBAAX;AAAgC,MAAA,QAAQ,EAAE,KAAKC,wBAA/C;AAAyE,MAAA,MAAM,EAAC,MAAhF;AAAA,6BACI,QAAC,UAAD;AAAA,gCACA,QAAC,MAAD,CAAQ,gBAAR;AACI,UAAA,KAAK,EAAC,iBADV;AAEI,UAAA,WAAW,EAAC,uEAFhB;AAAA,iCAII,QAAC,IAAD;AAAM,YAAA,SAAS,MAAf;AAAA,oCAEI,QAAC,UAAD;AACA,cAAA,KAAK,EAAC,MADN;AAEA,cAAA,OAAO,EAAE,CACL;AAACC,gBAAAA,KAAK,EAAE,MAAR;AAAgB1B,gBAAAA,KAAK,EAAE;AAAvB,eADK,EAEL;AAAC0B,gBAAAA,KAAK,EAAE,WAAR;AAAqB1B,gBAAAA,KAAK,EAAE;AAA5B,eAFK,EAGL;AAAC0B,gBAAAA,KAAK,EAAE,SAAR;AAAmB1B,gBAAAA,KAAK,EAAE;AAA1B,eAHK,EAIL;AAAC0B,gBAAAA,KAAK,EAAE,YAAR;AAAsB1B,gBAAAA,KAAK,EAAE;AAA7B,eAJK,EAKL;AAAC0B,gBAAAA,KAAK,EAAE,UAAR;AAAoB1B,gBAAAA,KAAK,EAAE;AAA3B,eALK,EAML;AAAC0B,gBAAAA,KAAK,EAAE,SAAR;AAAmB1B,gBAAAA,KAAK,EAAE;AAA1B,eANK,EAOL;AAAC0B,gBAAAA,KAAK,EAAE,QAAR;AAAkB1B,gBAAAA,KAAK,EAAE;AAAzB,eAPK,CAFT;AAWA,cAAA,IAAI,EAAC,MAXL;AAYA,cAAA,QAAQ,EAAE,KAAKU,KAAL,CAAWP,YAZrB;AAaA,cAAA,QAAQ,EAAE,KAAKwB;AAbf;AAAA;AAAA;AAAA;AAAA,oBAFJ,eAiBI,QAAC,SAAD;AACI,cAAA,KAAK,EAAC,gBADV;AAEI,cAAA,IAAI,EAAC,WAFT;AAGI,cAAA,IAAI,EAAC,MAHT;AAII,cAAA,KAAK,EAAE,KAAKjB,KAAL,CAAWR,SAJtB;AAKI,cAAA,QAAQ,EAAE,KAAK0B,kBALnB;AAMI,cAAA,cAAc,eACV,QAAC,MAAD;AAAQ,gBAAA,OAAO,EAAE,KAAKlB,KAAL,CAAWL,SAAX,GAAuB,IAAvB,GAA8B,KAA/C;AAAuD,gBAAA,OAAO,EAAE,IAAhE;AAAsE,gBAAA,IAAI,EAAC,cAA3E;AAA0F,gBAAA,MAAM,EAAC,MAAjG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAPR;AAAA;AAAA;AAAA;AAAA,oBAjBJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAJJ;AAAA;AAAA;AAAA;AAAA,gBADA,EAoCC,KAAKK,KAAL,CAAWK,YAAX,gBAGD,QAAC,MAAD;AAAQ,UAAA,SAAS,EAAE,IAAnB;AAAA,iCACI,QAAC,MAAD,CAAQ,OAAR;AAAA,mCACA,QAAC,SAAD;AACI,cAAA,KAAK,EAAE,KAAKL,KAAL,CAAWM,cAAX,CAA0Ba,KADrC;AAEI,cAAA,aAAa,EAAE;AACXC,gBAAAA,OAAO,EAAE,aADE;AAEXC,gBAAAA,QAAQ,EAAE,MAAM;AAAE,uBAAKC,gBAAL;AAAyB,iBAFhC;AAGXC,gBAAAA,OAAO,EAAC,KAAKvB,KAAL,CAAWL,SAAX,GAAuB,IAAvB,GAA8B,KAH3B;AAIX6B,gBAAAA,OAAO,EAAC;AAJG,eAFnB;AAQI,cAAA,eAAe,EAAE;AACbJ,gBAAAA,OAAO,EAAC,2BADK;AAEbC,gBAAAA,QAAQ,EAAE,MAAM;AAAE,uBAAKI,iBAAL;AAA0B,iBAF/B;AAGbF,gBAAAA,OAAO,EAAC,KAAKvB,KAAL,CAAWL,SAAX,GAAuB,IAAvB,GAA8B;AAHzB,eARrB;AAaI,cAAA,WAAW,eACH;AAAK,gBAAA,SAAS,EAAC,YAAf;AAAA,uCACI;AAAK,kBAAA,SAAS,EAAC,gBAAf;AAAA,4BACC,KAAKK,KAAL,CAAWM,cAAX,CAA0BoB,QAA1B,GAEO,KAAK1B,KAAL,CAAWM,cAAX,CAA0BoB,QAA1B,CAAmCC,GAAnC,CAAwC,CAACC,OAAD,EAASC,KAAT,KAAmB;AACvD,wCACA;AAAK,sBAAA,SAAS,EAAC,QAAf;AAAA,8CACI;AAAK,wBAAA,SAAS,EAAC,cAAf;AAAA,+CACI;AAAK,0BAAA,OAAO,EAAC,WAAb;AAAA,iDACI;AAAM,4BAAA,CAAC,EAAC;AAAR;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,8BADJ,eAMI;AAAK,wBAAA,SAAS,EAAC,iBAAf;AAAA,gDACI;AAAA,iDAAG;AAAA,sCAAOD,OAAO,CAACE;AAAf;AAAA;AAAA;AAAA;AAAA;AAAH;AAAA;AAAA;AAAA;AAAA,gCADJ,eAEI;AAAA,iDAAG;AAAA,sCAAOF,OAAO,CAACG;AAAf;AAAA;AAAA;AAAA;AAAA;AAAH;AAAA;AAAA;AAAA;AAAA,gCAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,8BANJ;AAAA,uBAA6BF,KAA7B;AAAA;AAAA;AAAA;AAAA,4BADA;AAaH,mBAdD,CAFP,GAmBO;AApBR;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,sBAdZ;AAwCI,cAAA,IAAI,EAAC,OAxCT;AAAA,qCA0CI;AAAK,gBAAA,SAAS,EAAC,cAAf;AAAA,wCACA;AACI,kBAAA,GAAG,EAAC,EADR;AAEI,kBAAA,KAAK,EAAC,MAFV;AAGI,kBAAA,MAAM,EAAC,MAHX;AAII,kBAAA,KAAK,EAAE;AACPG,oBAAAA,SAAS,EAAE,OADJ;AAEPC,oBAAAA,cAAc,EAAE;AAFT,mBAJX;AAQI,kBAAA,GAAG,EAAE,KAAKjC,KAAL,CAAWM,cAAX,CAA0B4B,MAA1B,CAAiC,CAAjC;AART;AAAA;AAAA;AAAA;AAAA,wBADA,eAWA;AAAK,kBAAA,SAAS,EAAC,eAAf;AAAA,yCAAwC,KAAKlC,KAAL,CAAWM,cAAX,CAA0ByB,KAAlE;AAAA;AAAA;AAAA;AAAA;AAAA,wBAXA;AAAA;AAAA;AAAA;AAAA;AAAA;AA1CJ;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,gBAHC,GAiEG,EArGJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YADR;AA4GH;;AA/K0C","sourcesContent":["import React,{ Component } from 'react';\r\nimport { \r\n    Layout,\r\n    Card,\r\n    Form,\r\n    FormLayout,\r\n    TextField,\r\n    Button,\r\n    ChoiceList,\r\n    MediaCard,\r\n    TextContainer,\r\n    TextStyle,\r\n} from '@shopify/polaris';\r\nimport axios from 'axios';\r\nimport Cookies from 'js-cookie';\r\n\r\nexport default class CrawlUrl extends Component{\r\n    constructor(props) {\r\n        super(props)  \r\n        this.state = {\r\n            searchUrl:'',\r\n            selectedEcom:['Ebay'],\r\n            fetchedProduct:null,\r\n            foundProduct:false,\r\n            isLoading:false,\r\n        }\r\n    }\r\n\r\n    handleSearchChange = (value) =>{this.setState({searchUrl:value})}\r\n    handleChangeEcom = (value) => {\r\n        this.setState({selectedEcom:value})\r\n        this.setState({searchUrl:''})\r\n    }\r\n    handleFecthProductSubmit = async (_event) => {\r\n        this.setState({\r\n            isLoading:true,\r\n        })\r\n        const response = await axios({\r\n            url : '/api/scrap-product-detail?',\r\n            method:'GET',\r\n            params:{\r\n                url:this.state.searchUrl,\r\n                ecom:this.state.selectedEcom[0],\r\n                product_id:0,\r\n                db_entry:0,\r\n            }\r\n        }).then((response) =>{\r\n            this.setState({\r\n                foundProduct:true,\r\n                fetchedProduct : response.data.productDetail,\r\n                isLoading:false,\r\n            })\r\n        })        \r\n    }\r\n    handleAddProduct = async (_event) =>{\r\n        //console.log(this.state.fetchedProduct)\r\n        this.setState({\r\n            isLoading:true,\r\n        })\r\n        try{\r\n            const response = await axios({\r\n                headers:{\r\n                    'shopname':Cookies.get('shopOrigin')\r\n                },\r\n                url:'/api/products',\r\n                method:'post',\r\n                data:fetchedProduct\r\n            }).then((response) =>{\r\n                console.log(response)\r\n                this.setState({\r\n                    isLoading:false,\r\n                })\r\n            })\r\n            //console.log(response)\r\n        }catch(error){\r\n            console.log(error)\r\n        }\r\n    }\r\n    handleEditProduct = async (_event) => {\r\n        console.log('popup')\r\n    }\r\n\r\n    render(){\r\n        return(\r\n                <Form name=\"product-fetch-form\" onSubmit={this.handleFecthProductSubmit} method=\"post\">\r\n                    <FormLayout>\r\n                    <Layout.AnnotatedSection\r\n                        title=\"Extract Product\"\r\n                        description=\"With the help of scrap url you can get product from here to your shop\"\r\n                    >\r\n                        <Card sectioned>\r\n                            \r\n                            <ChoiceList\r\n                            title=\"ECOM\"\r\n                            choices={[\r\n                                {label: 'Ebay', value: 'Ebay'},\r\n                                {label: 'Sams Club', value: 'SamsClub'},\r\n                                {label: 'Boscovs', value: 'Boscovs'},\r\n                                {label: 'Home Depot', value: 'HomeDepot'},\r\n                                {label: 'Bed Bath', value: 'BedBathandBeyond'},\r\n                                {label: 'WalMart', value: 'Walmart'},\r\n                                {label: 'CostCo', value: 'CostCo'}\r\n                            ]}\r\n                            name=\"ecom\"                            \r\n                            selected={this.state.selectedEcom}\r\n                            onChange={this.handleChangeEcom}\r\n                            />\r\n                            <TextField\r\n                                label=\"Paste URL Here\"\r\n                                name=\"searchUrl\"\r\n                                type=\"text\"\r\n                                value={this.state.searchUrl}\r\n                                onChange={this.handleSearchChange}\r\n                                connectedRight={\r\n                                    <Button loading={this.state.isLoading ? true : false } primary={true} name=\"fetchproduct\" submit=\"true\">\r\n                                        Extract\r\n                                    </Button>\r\n                                }\r\n                            />                            \r\n                        </Card>\r\n                    </Layout.AnnotatedSection>\r\n                    {this.state.foundProduct\r\n                    ?\r\n                    \r\n                    <Layout sectioned={true}>\r\n                        <Layout.Section>\r\n                        <MediaCard\r\n                            title={this.state.fetchedProduct.title}\r\n                            primaryAction={{\r\n                                content: 'Add To List',\r\n                                onAction: () => { this.handleAddProduct() },\r\n                                loading:this.state.isLoading ? true : false,\r\n                                primary:true,\r\n                            }}\r\n                            secondaryAction={{\r\n                                content:'Edit Before [Add To List]',\r\n                                onAction: () => { this.handleEditProduct() },\r\n                                loading:this.state.isLoading ? true : false\r\n                            }}\r\n                            description={ \r\n                                    <div className=\"variations\">\r\n                                        <div className=\"variation-list\">                                    \r\n                                        {this.state.fetchedProduct.variants\r\n                                            ?\r\n                                                this.state.fetchedProduct.variants.map( (variant,index) => {\r\n                                                    return(\r\n                                                    <div className=\"v-item\" key={index}>\r\n                                                        <div className=\"image-holder\">\r\n                                                            <svg viewBox=\"0 0 20 20\">\r\n                                                                <path d=\"M2.5 1A1.5 1.5 0 0 0 1 2.5v15A1.5 1.5 0 0 0 2.5 19h15a1.5 1.5 0 0 0 1.5-1.5v-15A1.5 1.5 0 0 0 17.5 1h-15zm5 3.5c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zM16.499 17H3.497c-.41 0-.64-.46-.4-.79l3.553-4.051c.19-.21.52-.21.72-.01L9 14l3.06-4.781a.5.5 0 0 1 .84.02l4.039 7.011c.18.34-.06.75-.44.75z\"></path>\r\n                                                            </svg>\r\n                                                        </div>\r\n                                                        <div className=\"variation-props\">\r\n                                                            <p><span>{variant.name}</span></p>\r\n                                                            <p><span>{variant.price}</span></p>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    )\r\n                                                })\r\n                                                                                       \r\n                                            :\r\n                                                'No variation'\r\n                                        }\r\n                                        </div>\r\n                                    </div>\r\n                                }\r\n                            size=\"small\"\r\n                        >\r\n                            <div className=\"image-holder\">\r\n                            <img\r\n                                alt=\"\"\r\n                                width=\"100%\"\r\n                                height=\"100%\"\r\n                                style={{\r\n                                objectFit: 'cover',\r\n                                objectPosition: 'center',\r\n                                }}\r\n                                src={this.state.fetchedProduct.images[0]}\r\n                            />\r\n                            <div className=\"product-price\">Price : {this.state.fetchedProduct.price}</div>\r\n                            </div>\r\n                        </MediaCard>\r\n                        </Layout.Section>\r\n                    </Layout>\r\n\r\n                    : \r\n                        ''\r\n                    }\r\n                    </FormLayout>              \r\n                </Form>\r\n        );\r\n    }\r\n     \r\n    \r\n}"]},"metadata":{},"sourceType":"module"}