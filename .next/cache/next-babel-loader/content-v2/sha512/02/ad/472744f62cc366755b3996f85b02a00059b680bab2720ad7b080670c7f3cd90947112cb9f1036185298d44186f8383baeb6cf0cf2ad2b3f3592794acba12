{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"E:\\\\novostack\\\\shopify\\\\apps\\\\ns-nextjs-shopify\\\\components\\\\CrawlUrl.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component, createRef } from 'react';\nimport { Layout, Card, Form, FormLayout, TextField, Button, ChoiceList, MediaCard, Banner, DataTable, Checkbox } from '@shopify/polaris';\nimport axios from 'axios';\nimport Cookies from 'js-cookie';\nimport { IoIosInformationCircle } from \"react-icons/io\";\nexport default class CrawlUrl extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"handleSearchChange\", value => {\n      this.setState({\n        searchUrl: value\n      });\n    });\n\n    _defineProperty(this, \"handleChangeEcom\", value => {\n      this.setState({\n        selectedEcom: value\n      });\n      this.setState({\n        searchUrl: ''\n      });\n    });\n\n    _defineProperty(this, \"handleTitleChange\", value => {\n      this.setState({\n        fetchedProduct: _objectSpread(_objectSpread({}, this.state.fetchedProduct), {}, {\n          title: value\n        })\n      });\n    });\n\n    _defineProperty(this, \"handleFinalPrice\", (name, value) => {\n      this.setState({\n        name: value\n      });\n    });\n\n    _defineProperty(this, \"handleFecthProductSubmit\", async _event => {\n      this.setState({\n        isLoading: true\n      });\n\n      try {\n        const response = await axios({\n          url: '/api/scrap-product-detail?',\n          method: 'GET',\n          params: {\n            url: this.state.searchUrl,\n            ecom: this.state.selectedEcom[0],\n            product_id: 0,\n            db_entry: 0\n          }\n        }).then(response => {\n          //console.log(response)\n          if (response.data != null) {\n            this.setState({\n              foundProduct: true,\n              fetchedProduct: response.data.product,\n              isLoading: false\n            });\n          } else {\n            this.setState({\n              foundProduct: false,\n              isLoading: false,\n              msg: 'No Product data found on given product page link'\n            });\n          }\n          /*\r\n          if(response.data.productDetail!=null){            \r\n              if(response.data.productDetail.variants){\r\n                  const items = [];\r\n                  Promise.all(\r\n                      response.data.productDetail.variants.map((variant,index) => {\r\n                          if(variant.price==null){\r\n                              variant.price = 0\r\n                          }else{\r\n                          variant.price = variant.price.toString().replace('$','')\r\n                          }\r\n                          variant.finalPrice = (Number( this.state.priceRules.productPriceHike ) * parseFloat( variant.price))\r\n                          if(!variant.qty){variant.qty=0}\r\n                          items.push(variant)\r\n                      })\r\n                  );                    \r\n                  response.data.productDetail.variants = items\r\n                  console.log(response.data.productDetail)\r\n                  this.setState({\r\n                      foundProduct:true,\r\n                      fetchedProduct : response.data.productDetail,\r\n                      isLoading:false,\r\n                  })\r\n              }\r\n          }else{\r\n              this.setState({\r\n                  foundProduct:false,\r\n                  isLoading:false,\r\n                  msg:'No Product data found on given product page link',\r\n              })\r\n          }\r\n          */\n\n        });\n      } catch (error) {\n        console.log(error);\n        this.setState({\n          isLoading: false\n        });\n      }\n    });\n\n    _defineProperty(this, \"handleAddProduct\", async _event => {\n      //console.log(this.state.fetchedProduct)\n      this.setState({\n        isLoading: true\n      });\n\n      try {\n        const response = await axios({\n          headers: {\n            'shopname': Cookies.get('shopOrigin')\n          },\n          url: '/api/products',\n          method: 'post',\n          data: this.state.fetchedProduct\n        }).then(response => {\n          console.log(response);\n          this.setState({\n            isLoading: false\n          });\n        }); //console.log(response)\n      } catch (error) {\n        console.log(error);\n      }\n    });\n\n    _defineProperty(this, \"handleEditProduct\", async _event => {\n      console.log('popup');\n    });\n\n    this.state = {\n      searchUrl: '',\n      selectedEcom: ['Ebay'],\n      fetchedProduct: null,\n      foundProduct: false,\n      isLoading: false,\n      msg: 'Please copy past product page into url field and press extract button',\n      priceRules: {\n        pricehikeconditional: '*',\n        productPriceHike: '2'\n      },\n      finalPrice: 0\n    };\n  }\n\n  componentDidMount() {\n    try {\n      const response = axios({\n        headers: {\n          'shopname': Cookies.get('shopOrigin')\n        },\n        url: '/api/settings',\n        method: 'GET'\n      }).then(response => {\n        response.data.settings ? this.setState({\n          priceRules: response.data.settings.priceRules\n        }) : this.setState({\n          priceRules: {\n            pricehikeconditional: '*',\n            productPriceHike: '2'\n          }\n        });\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(Form, {\n      name: \"product-fetch-form\",\n      onSubmit: this.handleFecthProductSubmit,\n      method: \"post\",\n      children: /*#__PURE__*/_jsxDEV(FormLayout, {\n        children: [/*#__PURE__*/_jsxDEV(Layout.AnnotatedSection, {\n          title: \"Extract Product\",\n          description: \"With the help of scrap url you can get product from here to your shop\",\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            sectioned: true,\n            children: [/*#__PURE__*/_jsxDEV(ChoiceList, {\n              choices: [{\n                label: 'Ebay',\n                value: 'Ebay'\n              }, {\n                label: 'Sams Club',\n                value: 'SamsClub'\n              }, {\n                label: 'Boscovs',\n                value: 'Boscovs'\n              }, {\n                label: 'Home Depot',\n                value: 'HomeDepot'\n              }, {\n                label: 'Bed Bath',\n                value: 'BedBathandBeyond'\n              }, {\n                label: 'WalMart',\n                value: 'Walmart'\n              }, {\n                label: 'CostCo',\n                value: 'CostCo'\n              }],\n              name: \"ecom\",\n              selected: this.state.selectedEcom,\n              onChange: this.handleChangeEcom\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(TextField, {\n              label: \"Paste URL Here\",\n              name: \"searchUrl\",\n              type: \"text\",\n              value: this.state.searchUrl,\n              onChange: this.handleSearchChange,\n              connectedRight: /*#__PURE__*/_jsxDEV(Button, {\n                loading: this.state.isLoading ? true : false,\n                primary: true,\n                name: \"fetchproduct\",\n                submit: \"true\",\n                children: \"Extract\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 212,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 21\n        }, this), this.state.foundProduct ? /*#__PURE__*/_jsxDEV(Layout, {\n          sectioned: true,\n          children: /*#__PURE__*/_jsxDEV(Layout.Section, {\n            children: /*#__PURE__*/_jsxDEV(Card, {\n              sectioned: true,\n              children: [/*#__PURE__*/_jsxDEV(TextField, {\n                name: \"title\",\n                label: \"Product Title\",\n                value: this.state.fetchedProduct.title,\n                onChange: this.handleTitleChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Layout, {\n                children: [/*#__PURE__*/_jsxDEV(Layout.Section, {\n                  secondary: true,\n                  children: this.state.fetchedProduct.items ? /*#__PURE__*/_jsxDEV(\"img\", {\n                    alt: \"\",\n                    width: \"100%\",\n                    height: \"100%\",\n                    style: {\n                      objectFit: 'cover',\n                      objectPosition: 'center'\n                    },\n                    src: this.state.fetchedProduct.items[0].images[0]\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 229,\n                    columnNumber: 45\n                  }, this) : ''\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 226,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Layout.Section, {\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"variant-table\",\n                    children: /*#__PURE__*/_jsxDEV(\"table\", {\n                      width: \"100%\",\n                      children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"SKU\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 247,\n                          columnNumber: 53\n                        }, this), this.state.fetchedProduct.has_variations ? this.state.fetchedProduct.items[0].modifiers.map((variant, index) => {\n                          return /*#__PURE__*/_jsxDEV(\"th\", {\n                            align: \"left\",\n                            children: variant.name\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 253,\n                            columnNumber: 65\n                          }, this);\n                        }) : '', /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"Price\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 259,\n                          columnNumber: 53\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"Margin\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 260,\n                          columnNumber: 53\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"Final Price\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 261,\n                          columnNumber: 53\n                        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                          children: \"Unites\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 262,\n                          columnNumber: 53\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 246,\n                        columnNumber: 49\n                      }, this), this.state.fetchedProduct.items ? this.state.fetchedProduct.items.map((variant, index) => {\n                        if (this.state.priceRules.pricehikeconditional == '*') {\n                          variant.finalPrice = Number(this.state.priceRules.productPriceHike) * parseFloat(variant.price);\n                        } else if (this.state.priceRules.pricehikeconditional == '+') {\n                          variant.finalPrice = Number(this.state.priceRules.productPriceHike) + parseFloat(variant.price);\n                        }\n\n                        return /*#__PURE__*/_jsxDEV(\"tr\", {\n                          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                            children: variant.sku\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 276,\n                            columnNumber: 65\n                          }, this), variant.modifiers.map((modifier, i) => {\n                            return /*#__PURE__*/_jsxDEV(\"td\", {\n                              children: modifier.value\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 280,\n                              columnNumber: 77\n                            }, this);\n                          }), /*#__PURE__*/_jsxDEV(\"td\", {\n                            children: [\"$ \", variant.price]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 284,\n                            columnNumber: 65\n                          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                            children: [this.state.priceRules.pricehikeconditional, \" \", this.state.priceRules.productPriceHike]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 285,\n                            columnNumber: 65\n                          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                            children: /*#__PURE__*/_jsxDEV(TextField, {\n                              name: \"finalPrice\",\n                              type: \"text\",\n                              value: variant.finalPrice,\n                              onChange: this.handleFinalPrice(_event.target.name, _event.target.value)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 287,\n                              columnNumber: 69\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 286,\n                            columnNumber: 65\n                          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                            children: \" 0 \"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 294,\n                            columnNumber: 65\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 275,\n                          columnNumber: 61\n                        }, this);\n                      }) : 'No Variant available']\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 245,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 244,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 243,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 225,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 21\n        }, this) : /*#__PURE__*/_jsxDEV(Layout, {\n          children: /*#__PURE__*/_jsxDEV(Layout.Section, {\n            children: /*#__PURE__*/_jsxDEV(Banner, {\n              icon: IoIosInformationCircle,\n              title: \"Product fetch\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                children: this.state.msg\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 314,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 313,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 312,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 17\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["E:/novostack/shopify/apps/ns-nextjs-shopify/components/CrawlUrl.js"],"names":["React","Component","createRef","Layout","Card","Form","FormLayout","TextField","Button","ChoiceList","MediaCard","Banner","DataTable","Checkbox","axios","Cookies","IoIosInformationCircle","CrawlUrl","constructor","props","value","setState","searchUrl","selectedEcom","fetchedProduct","state","title","name","_event","isLoading","response","url","method","params","ecom","product_id","db_entry","then","data","foundProduct","product","msg","error","console","log","headers","get","priceRules","pricehikeconditional","productPriceHike","finalPrice","componentDidMount","settings","render","handleFecthProductSubmit","label","handleChangeEcom","handleSearchChange","handleTitleChange","items","objectFit","objectPosition","images","has_variations","modifiers","map","variant","index","Number","parseFloat","price","sku","modifier","i","handleFinalPrice","target"],"mappings":"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","sourcesContent":["import React,{ Component, createRef } from 'react';\r\nimport { \r\n    Layout,\r\n    Card,\r\n    Form,\r\n    FormLayout,\r\n    TextField,\r\n    Button,\r\n    ChoiceList,\r\n    MediaCard,\r\n    Banner,\r\n    DataTable,\r\n    Checkbox,\r\n} from '@shopify/polaris';\r\nimport axios from 'axios';\r\nimport Cookies from 'js-cookie';\r\nimport {IoIosInformationCircle} from \"react-icons/io\";\r\n\r\nexport default class CrawlUrl extends Component{\r\n    constructor(props) {\r\n        super(props)  \r\n        this.state = {\r\n            searchUrl:'',\r\n            selectedEcom:['Ebay'],\r\n            fetchedProduct:null,\r\n            foundProduct:false,\r\n            isLoading:false,     \r\n            msg:'Please copy past product page into url field and press extract button',\r\n            priceRules : {\r\n                pricehikeconditional:'*',\r\n                productPriceHike:'2',\r\n            },\r\n            finalPrice:0,\r\n        }\r\n    }\r\n\r\n\r\n    componentDidMount(){\r\n        try{\r\n            const response = axios({\r\n                 headers:{\r\n                    'shopname':Cookies.get('shopOrigin')\r\n                },\r\n                url:'/api/settings',\r\n                method:'GET',         \r\n\r\n            }).then((response) =>{\r\n                response.data.settings\r\n                ? \r\n                    this.setState({\r\n                        priceRules:response.data.settings.priceRules\r\n                    })\r\n                :\r\n                    this.setState({\r\n                        priceRules : {\r\n                            pricehikeconditional:'*',\r\n                            productPriceHike:'2',\r\n                        }\r\n                    })\r\n            })\r\n        }catch(error){\r\n            console.log(error)\r\n        }\r\n    }\r\n\r\n    handleSearchChange = (value) =>{this.setState({searchUrl:value})}\r\n    handleChangeEcom = (value) => {\r\n        this.setState({selectedEcom:value})\r\n        this.setState({searchUrl:''})\r\n    }\r\n    handleTitleChange = (value) => {\r\n        this.setState({\r\n            fetchedProduct:{\r\n                ...this.state.fetchedProduct,\r\n                title:value,\r\n            }\r\n        })\r\n    }\r\n    handleFinalPrice = (name,value) => {\r\n        this.setState({\r\n            name: value\r\n        })\r\n    }\r\n    handleFecthProductSubmit = async (_event) => {\r\n        this.setState({\r\n            isLoading:true,\r\n        })\r\n        try{\r\n            const response = await axios({\r\n                url : '/api/scrap-product-detail?',\r\n                method:'GET',\r\n                params:{\r\n                    url:this.state.searchUrl,\r\n                    ecom:this.state.selectedEcom[0],\r\n                    product_id:0,\r\n                    db_entry:0,\r\n                }\r\n            }).then((response) =>{\r\n                //console.log(response)\r\n                if(response.data!=null){            \r\n                    this.setState({\r\n                        foundProduct:true,\r\n                        fetchedProduct : response.data.product,\r\n                        isLoading:false,\r\n                    })\r\n                }else{\r\n                    this.setState({\r\n                        foundProduct:false,\r\n                        isLoading:false,\r\n                        msg:'No Product data found on given product page link',\r\n                    })\r\n                }\r\n                /*\r\n                if(response.data.productDetail!=null){            \r\n                    if(response.data.productDetail.variants){\r\n                        const items = [];\r\n                        Promise.all(\r\n                            response.data.productDetail.variants.map((variant,index) => {\r\n                                if(variant.price==null){\r\n                                    variant.price = 0\r\n                                }else{\r\n                                variant.price = variant.price.toString().replace('$','')\r\n                                }\r\n                                variant.finalPrice = (Number( this.state.priceRules.productPriceHike ) * parseFloat( variant.price))\r\n                                if(!variant.qty){variant.qty=0}\r\n                                items.push(variant)\r\n                            })\r\n                        );                    \r\n                        response.data.productDetail.variants = items\r\n                        console.log(response.data.productDetail)\r\n                        this.setState({\r\n                            foundProduct:true,\r\n                            fetchedProduct : response.data.productDetail,\r\n                            isLoading:false,\r\n                        })\r\n                    }\r\n                }else{\r\n                    this.setState({\r\n                        foundProduct:false,\r\n                        isLoading:false,\r\n                        msg:'No Product data found on given product page link',\r\n                    })\r\n                }\r\n                */\r\n            })\r\n        }catch(error){\r\n            console.log(error)\r\n            this.setState({\r\n                isLoading:false,\r\n            })\r\n        }\r\n    }\r\n    handleAddProduct = async (_event) =>{\r\n        //console.log(this.state.fetchedProduct)\r\n        this.setState({\r\n            isLoading:true,\r\n        })\r\n        try{\r\n            const response = await axios({\r\n                headers:{\r\n                    'shopname':Cookies.get('shopOrigin')\r\n                },\r\n                url:'/api/products',\r\n                method:'post',\r\n                data:this.state.fetchedProduct\r\n            }).then((response) =>{\r\n                console.log(response)\r\n                this.setState({\r\n                    isLoading:false,\r\n                })\r\n            })\r\n            //console.log(response)\r\n        }catch(error){\r\n            console.log(error)\r\n        }\r\n    }\r\n    handleEditProduct = async (_event) => {\r\n        console.log('popup')\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            \r\n                <Form name=\"product-fetch-form\" onSubmit={this.handleFecthProductSubmit} method=\"post\">\r\n                    <FormLayout>\r\n                    <Layout.AnnotatedSection\r\n                        title=\"Extract Product\"\r\n                        description=\"With the help of scrap url you can get product from here to your shop\"\r\n                    >\r\n                        <Card sectioned>                            \r\n                            <ChoiceList\r\n                            choices={[\r\n                                {label: 'Ebay', value: 'Ebay'},\r\n                                {label: 'Sams Club', value: 'SamsClub'},\r\n                                {label: 'Boscovs', value: 'Boscovs'},\r\n                                {label: 'Home Depot', value: 'HomeDepot'},\r\n                                {label: 'Bed Bath', value: 'BedBathandBeyond'},\r\n                                {label: 'WalMart', value: 'Walmart'},\r\n                                {label: 'CostCo', value: 'CostCo'}\r\n                            ]}\r\n                            name=\"ecom\"                            \r\n                            selected={this.state.selectedEcom}\r\n                            onChange={this.handleChangeEcom}\r\n                            />\r\n                            <TextField\r\n                                label=\"Paste URL Here\"\r\n                                name=\"searchUrl\"\r\n                                type=\"text\"\r\n                                value={this.state.searchUrl}\r\n                                onChange={this.handleSearchChange}\r\n                                connectedRight={\r\n                                    <Button loading={this.state.isLoading ? true : false } primary={true} name=\"fetchproduct\" submit=\"true\">\r\n                                        Extract\r\n                                    </Button>\r\n                                }\r\n                            />                            \r\n                        </Card>\r\n                    </Layout.AnnotatedSection>\r\n                    {this.state.foundProduct\r\n                    ?                    \r\n                    <Layout sectioned={true}>                        \r\n                        <Layout.Section>\r\n                            <Card sectioned>\r\n                                <TextField name=\"title\" label=\"Product Title\" value={this.state.fetchedProduct.title} onChange={this.handleTitleChange} />\r\n                                <Layout>\r\n                                    <Layout.Section secondary>\r\n                                        {this.state.fetchedProduct.items\r\n                                        ?\r\n                                            <img\r\n                                            alt=\"\"\r\n                                            width=\"100%\"\r\n                                            height=\"100%\"\r\n                                            style={{\r\n                                            objectFit: 'cover',\r\n                                            objectPosition: 'center',\r\n                                            }}\r\n                                            src={this.state.fetchedProduct.items[0].images[0]}\r\n                                            />\r\n                                        :\r\n                                            ''\r\n                                        }\r\n                                    </Layout.Section>\r\n                                    <Layout.Section>\r\n                                        <div className='variant-table'>\r\n                                            <table width=\"100%\">\r\n                                                <tr>\r\n                                                    <th>SKU</th>\r\n                                                    \r\n                                                    {this.state.fetchedProduct.has_variations\r\n                                                    ?                                                    \r\n                                                        this.state.fetchedProduct.items[0].modifiers.map((variant,index) => {\r\n                                                            return(\r\n                                                                <th align=\"left\">{variant.name}</th>\r\n                                                            )                                                                    \r\n                                                        })\r\n                                                    :\r\n                                                        ''\r\n                                                    }\r\n                                                    <th>Price</th>\r\n                                                    <th>Margin</th>\r\n                                                    <th>Final Price</th>\r\n                                                    <td>Unites</td>                                                \r\n                                                </tr>\r\n                                                \r\n                                                {this.state.fetchedProduct.items\r\n                                                ?                                                    \r\n                                                    this.state.fetchedProduct.items.map((variant,index) => {\r\n                                                        \r\n                                                        if(this.state.priceRules.pricehikeconditional=='*'){\r\n                                                            variant.finalPrice = (Number( this.state.priceRules.productPriceHike ) * parseFloat( variant.price))\r\n                                                        }else if(this.state.priceRules.pricehikeconditional=='+'){\r\n                                                            variant.finalPrice = (Number( this.state.priceRules.productPriceHike ) + parseFloat( variant.price))\r\n                                                        }                                \r\n                                                        return(\r\n                                                            <tr>\r\n                                                                <td>{variant.sku}</td>\r\n                                                                {\r\n                                                                    variant.modifiers.map((modifier,i) => {\r\n                                                                        return(\r\n                                                                            <td>{modifier.value}</td>\r\n                                                                        )                                                                    \r\n                                                                    }) \r\n                                                                }\r\n                                                                <td>$ {variant.price}</td>\r\n                                                                <td>{this.state.priceRules.pricehikeconditional} {this.state.priceRules.productPriceHike}</td>\r\n                                                                <td>\r\n                                                                    <TextField\r\n                                                                        name=\"finalPrice\"\r\n                                                                        type=\"text\"\r\n                                                                        value={variant.finalPrice}\r\n                                                                        onChange={this.handleFinalPrice(_event.target.name,_event.target.value)}\r\n                                                                    />\r\n                                                                </td>\r\n                                                                <td> 0 </td>\r\n                                                            </tr>                                                            \r\n                                                        )\r\n                                                    })                                                    \r\n                                                :\r\n                                                    'No Variant available'\r\n                                                }\r\n                                                \r\n                                            </table>\r\n                                        </div>                  \r\n                                    </Layout.Section>\r\n                                </Layout>\r\n                            </Card>                        \r\n                        </Layout.Section>\r\n                    </Layout>\r\n                    \r\n                    : \r\n                        <Layout>\r\n                            <Layout.Section>\r\n                                <Banner icon={IoIosInformationCircle} title=\"Product fetch\">\r\n                                    <p>{this.state.msg}</p>\r\n                                </Banner>\r\n                            </Layout.Section>\r\n                        </Layout> \r\n                    }\r\n                    \r\n                    </FormLayout>              \r\n                </Form>\r\n        );\r\n    }\r\n     \r\n    \r\n}"]},"metadata":{},"sourceType":"module"}